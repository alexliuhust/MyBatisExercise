<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
 	PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
 	"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.alexSpring.mapper.PersonMapper">
	<!-- Nested queries -->
	<select id="findPersonById" parameterType="Integer"
		resultMap="IdCardWithPersonResult">
		select * from tb_person where id = #{id}
	</select>
	<resultMap type="Person" id="IdCardWithPersonResult">
		<id property="id" column="id" />
		<result property="name" column="name" />
		<result property="age" column="age" />
		<result property="sex" column="sex" />
		<association property="card" column="card_id"
			javaType="IdCard"
			select="com.alexSpring.mapper.IdCardMapper.findCodeById">
		</association>
	</resultMap>
	
	
	<!-- Nested results -->
	<select id="findPersonById_2" parameterType="Integer"
		resultMap="IdCardWithPersonResult_2">
		select p.*, ic.code from tb_person p, tb_idcard ic 
		where p.card_id = ic.id and p.id = #{id}
	</select>
	<resultMap type="Person" id="IdCardWithPersonResult_2">
		<id property="id" column="id" />
		<result property="name" column="name" />
		<result property="age" column="age" />
		<result property="sex" column="sex" />
		<association property="card" javaType="IdCard">
			<id property="id" column="card_id" />
			<result property="code" column="code" />
		</association>
	</resultMap>

</mapper>




















